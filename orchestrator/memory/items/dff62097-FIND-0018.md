# Memory: FIND-0018 â€” Missing Access Logging on Admin API Routes

## Metadata
- **Category**: access_logging
- **Service**: catalog-service
- **Severity**: medium
- **Outcome**: SUCCESS
- **Confidence**: high
- **Data Source**: live
- **Run ID**: dff62097
- **Created**: 2026-02-24T03:40:21.640190+00:00

## Fix Approach
Create an Express auditLog middleware and enhance adminAuth to emit structured audit logs. Use existing src/utils/logger.ts (console-based) for structured metadata. Apply auditLog to admin routes: DELETE /api/products/:id and DELETE /api/files/:filename. Log actor from req.user.id (or anonymous), action derived from HTTP method, resource and resource_id from path/params, include ip_address and status_code on completion. Added tests that spy on logger to verify audit logs for success and denied scenarios.

## Files Modified
- `src/utils/logger.ts`
- `src/middleware/auth.ts`
- `src/routes/index.ts`
- `tests/auditLog.test.ts`

## Test Results
- **Tests Passed**: Yes
- **Tests Added**: 7

## PR
https://github.com/aaronkjin/coupang-catalog-service/pull/18

## Error
No errors.
