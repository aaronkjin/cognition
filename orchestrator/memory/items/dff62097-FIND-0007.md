# Memory: FIND-0007 â€” Missing Audit Logging on Payment Endpoints

## Metadata
- **Category**: access_logging
- **Service**: payment-service
- **Severity**: low
- **Outcome**: SUCCESS
- **Confidence**: high
- **Data Source**: live
- **Run ID**: dff62097
- **Created**: 2026-02-24T03:40:21.640185+00:00

## Fix Approach
Add structured audit logs to PaymentController endpoints using existing SLF4J logger. Inject HttpServletRequest into controller methods to extract IP and X-User-Id header as actor. Log intent before service calls and result after, including fields: actor, action (read/write/delete/list), resource (transaction/payment_summary), resource_id (transactionId or N/A), result (success/failure/not_found), and ip_address. Avoid logging sensitive data (cardNumber omitted from logs). Use existing logging framework and add unit tests that capture Logback events to assert audit entries.

## Files Modified
- `src/main/java/com/coupang/payment/controller/PaymentController.java`
- `src/test/java/com/coupang/payment/controller/PaymentControllerAuditLogTest.java`

## Test Results
- **Tests Passed**: Yes
- **Tests Added**: 6

## PR
https://github.com/aaronkjin/coupang-payment-service/pull/20

## Error
No errors.
