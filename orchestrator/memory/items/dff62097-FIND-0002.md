# Memory: FIND-0002 â€” SQL Injection in TransactionDAO.findByUserId

## Metadata
- **Category**: sql_injection
- **Service**: payment-service
- **Severity**: high
- **Outcome**: SUCCESS
- **Confidence**: high
- **Data Source**: live
- **Run ID**: dff62097
- **Created**: 2026-02-24T03:40:21.639728+00:00

## Fix Approach
Replaced string-concatenated SQL in TransactionDAO.findByUserId and TransactionDAO.findById with parameterized PreparedStatement queries (using ? placeholders and setString/setLong). Kept findAll() using Statement since it uses a static query. Added integration-style JUnit tests using in-memory H2 to verify normal behavior and that SQL injection payloads are treated as literals (including payloads "' OR '1'='1" and "'; DROP TABLE transactions; --").

## Files Modified
- `src/main/java/com/coupang/payment/dao/TransactionDAO.java`
- `/home/ubuntu/.devin/requirements.md`
- `src/test/java/com/coupang/payment/dao/TransactionDAOTest.java`
- `src/test/resources/application-test.properties`

## Test Results
- **Tests Passed**: Yes
- **Tests Added**: 6

## PR
https://github.com/aaronkjin/coupang-payment-service/pull/18

## Error
No errors.
